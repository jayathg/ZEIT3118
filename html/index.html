<!DOCTYPE html>
<head>
  <script src="https://unpkg.com/@descope/web-component@1.10.6/dist/index.js"></script>
  <script src="https://unpkg.com/@descope/web-js-sdk@3.8.11/dist/index.umd.js"></script>
</head>
<html>
  <body>
    <h1>Log In With Descope Flows</h1>
    <p id="container"></p>

    <script>
      const sdk = Descope({ projectId: 'P2dhhp4gMs2Mj5dMPCiMTnsQ0sTG', persistTokens: true, autoRefresh: true });

      const sessionToken = sdk.getSessionToken()
      var notValidToken
      if (sessionToken) {
          notValidToken = sdk.isJwtExpired(sessionToken)
      }
      if (!sessionToken || notValidToken) {
          var container = document.getElementById('container');
          container.innerHTML = '<descope-wc project-id="P2dhhp4gMs2Mj5dMPCiMTnsQ0sTG" flow-id="sign-up-or-in"></descope-wc>';

          const wcElement = document.getElementsByTagName('descope-wc')[0];
          const onSuccess = (e) => {
            console.log(e.detail.user),
            sdk.refresh(),
            window.location.replace("./loggedIn?userId=" + encodeURIComponent(e.detail.user.loginIds))
          };
          const onError = (err) => console.log(err);

          wcElement.addEventListener('success', onSuccess);
          wcElement.addEventListener('error', onError);
      }
    </script>
  </body>
</html>

<script src="https://unpkg.com/@descope/web-js-sdk@3.8.11/dist/index.umd.js"></script>
<script>
  sdk.refresh()
  // Rest of your logic ...
</script>
    
    <!-- Rest of your logic ... -->
    <!-- Additional logic and elements -->
    <div>
      <p>Welcome to the TEST website!</p>
      <button onclick="window.location.href='#'">Sign Up</button> 
      <button onclick="window.location.href='#'">Forgot Password</button>
    </div>
  </body>
</html>
